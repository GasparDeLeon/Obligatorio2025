<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Tutti Frutti - Modo solitario</title>

    <link rel="stylesheet" th:href="@{/css/main.css}">
    <script defer th:src="@{/js/jugarSolo.js}"></script>
</head>
<body>
<div class="page-container">
    <header class="header">
        <div class="logo">
            <img th:src="@{/img/logoMinimalista.png}" alt="Logo Tutti Frutti">
            <h1>Tutti Frutti</h1>
        </div>
        <div class="header-info">
            <span class="badge-modo">Modo solitario</span>
            <span class="badge-letra">
                Letra:
                <strong th:text="${letra}">A</strong>
            </span>
            <span class="badge-tiempo">
                Tiempo:
                <span id="timer"
                      th:attr="data-duracion=${duracionSegundos}">
                    00:00
                </span>
            </span>
        </div>
    </header>

    <main class="main-content">
        <section class="card">
            <h2>Escribe una palabra por categoría</h2>
            <p class="descripcion">
                Todas las palabras deben comenzar con la letra
                <strong th:text="${letra}">A</strong>.
                Cuando completes todas las categorías correctamente,
                se habilitará el botón "Tutti Frutti".
            </p>

            <form id="form-jugar-solo"
                  th:action="@{'/solo/' + ${idPartida} + '/responder'}"
                  method="post">

                <!-- acción que vamos a setear desde JS o desde el onClick -->
                <input type="hidden" name="accion" id="input-accion" value="">

                <!-- conservar configuración al enviar -->
                <input type="hidden" name="duracionTurnoSeg"
                       th:value="${duracionSegundos}" />

                <input type="hidden" name="cats"
                       th:value="${cats}" />

                <table class="tabla-categorias">
                    <thead>
                    <tr>
                        <th>Categoría</th>
                        <th>Respuesta</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="cat : ${categorias}">
                        <td th:text="${cat.nombre}">Categoría</td>
                        <td>
                            <input type="text"
                                   class="input-respuesta"
                                   autocomplete="off"
                                   th:name="${'respuestas[' + cat.id + ']'}">
                        </td>
                    </tr>
                    </tbody>
                </table>

                <div class="acciones">
                    <button type="button"
                            id="btn-rendirse"
                            class="btn btn-secundario"
                            onclick="enviarAccion('rendirse')">
                        Me rindo
                    </button>

                    <button type="button"
                            id="btn-tutti"
                            class="btn btn-primario"
                            disabled
                            onclick="enviarAccion('tutti-frutti')">
                        Tutti Frutti
                    </button>
                </div>
            </form>

        </section>
    </main>
</div>

<script>
    // Si ya tenés algo parecido en jugarSolo.js, podés borrarlo de acá
    function enviarAccion(valor) {
        const inputAccion = document.getElementById('input-accion');
        const form = document.getElementById('form-jugar-solo');
        inputAccion.value = valor;
        form.submit();
    }
</script>
</body>
</html>
